<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="rflsgen">
<title>Use Case 1: Generating landscape series with fixed structure and varying spatial configurations • rflsgen</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Use Case 1: Generating landscape series with fixed structure and varying spatial configurations">
<meta property="og:description" content="rflsgen">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rflsgen</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/Targets.html">
    <span class="fa fa fa fa-bullseye"></span>
     
    Available targets
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/FAQ.html">
    <span class="fa fa fa fa-question-circle"></span>
     
    Frequently asked questions
  </a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--use-cases">
    <span class="bi bi-lightbulb-fill"></span>
     
    Use cases
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--use-cases">
    <a class="dropdown-item" href="../articles/UseCase1.html">Use case 1: Fixed structure and varying spatial configurations</a>
    <a class="dropdown-item" href="../articles/UseCase2.html">Use case 2: Exploring correlations between landscape indices</a>
    <a class="dropdown-item" href="../articles/UseCase3.html">Use case 3: Recreating large landscape composition patterns</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/dimitri-justeau/rflsgen/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Use Case 1: Generating landscape series with fixed structure and varying spatial configurations</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dimitri-justeau/rflsgen/blob/HEAD/vignettes/UseCase1.Rmd" class="external-link"><code>vignettes/UseCase1.Rmd</code></a></small>
      <div class="d-none name"><code>UseCase1.Rmd</code></div>
    </div>

    
    
<p>In this use case, we will see how rflsgen can be used to generate a series of landscapes with a fixed composition and varying spatial configurations. First let’s load rflsgen:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dimitri-justeau.github.io/rflsgen/" class="external-link">rflsgen</a></span><span class="op">)</span></code></pre></div>
<div class="section level2">
<h2 id="defining-targets-for-landscape-composition">Defining targets for landscape composition<a class="anchor" aria-label="anchor" href="#defining-targets-for-landscape-composition"></a>
</h2>
<p>Let’s say that, we want to generate 500x500 landscapes composed of three focal land-use classes: shrubland, savanna, and forest. A fourth non-focal land-use class will correspond to areas with no vegetation cover. The first thing we need to do is to define class-level composition targets for our focal classes. We keep it simple and just impose strict constraints on landscape proportion (PLAND), the number of patches (NP), and a looser constraint on patch area (AREA):</p>
<table class="table">
<thead><tr class="header">
<th>Class</th>
<th>NP</th>
<th>AREA</th>
<th>PLAND</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>shrubland</td>
<td>40</td>
<td>[500, 3000]</td>
<td>20%</td>
</tr>
<tr class="even">
<td>savanna</td>
<td>30</td>
<td>[500, 3000]</td>
<td>10%</td>
</tr>
<tr class="odd">
<td>forest</td>
<td>20</td>
<td>[500, 3000]</td>
<td>10%</td>
</tr>
</tbody>
</table>
<p>We can use a JSON file or string to define these targets:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"nbRows"</span> <span class="op">:</span> <span class="dv">500</span><span class="op">,</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"nbCols"</span> <span class="op">:</span> <span class="dv">500</span><span class="op">,</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"classes"</span> <span class="op">:</span> [</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>      <span class="st">"name"</span> <span class="op">:</span> <span class="st">"shrubland"</span><span class="op">,</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>      <span class="st">"NP"</span> <span class="op">:</span> [<span class="dv">40</span><span class="op">,</span> <span class="dv">40</span>]<span class="op">,</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>      <span class="st">"AREA"</span><span class="op">:</span> [<span class="dv">500</span><span class="op">,</span> <span class="dv">3000</span>]<span class="op">,</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>      <span class="st">"PLAND"</span><span class="op">:</span> [<span class="dv">20</span><span class="op">,</span> <span class="dv">20</span>]<span class="op">,</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>      <span class="st">"name"</span> <span class="op">:</span> <span class="st">"savanna"</span><span class="op">,</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>      <span class="st">"NP"</span> <span class="op">:</span> [<span class="dv">30</span><span class="op">,</span> <span class="dv">30</span>]<span class="op">,</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>      <span class="st">"AREA"</span><span class="op">:</span> [<span class="dv">500</span><span class="op">,</span> <span class="dv">3000</span>]<span class="op">,</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>      <span class="st">"PLAND"</span><span class="op">:</span> [<span class="dv">10</span><span class="op">,</span> <span class="dv">10</span>]<span class="op">,</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>      <span class="st">"name"</span> <span class="op">:</span> <span class="st">"forest"</span><span class="op">,</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>      <span class="st">"NP"</span> <span class="op">:</span> [<span class="dv">20</span><span class="op">,</span> <span class="dv">20</span>]<span class="op">,</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>      <span class="st">"AREA"</span><span class="op">:</span> [<span class="dv">500</span><span class="op">,</span> <span class="dv">3000</span>]<span class="op">,</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>      <span class="st">"PLAND"</span><span class="op">:</span> [<span class="dv">10</span><span class="op">,</span> <span class="dv">10</span>]<span class="op">,</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<script type="text/javascript">
{
  "nbRows" : 500,
  "nbCols" : 500,
  "classes" : [
    {
      "name" : "shrubland",
      "NP" : [40, 40],
      "AREA": [500, 3000],
      "PLAND": [20, 20],
    },
    {
      "name" : "savanna",
      "NP" : [30, 30],
      "AREA": [500, 3000],
      "PLAND": [10, 10],
    },
    {
      "name" : "forest",
      "NP" : [20, 20],
      "AREA": [500, 3000],
      "PLAND": [10, 10],
    }
  ]
}
</script><p>We can also use <code>flsgen_create_class_targets</code> and <code>flsgen_create_landscape_targets</code> functions:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">shrubland</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flsgen_create_class_targets.html">flsgen_create_class_targets</a></span><span class="op">(</span><span class="st">"shrubland"</span>, NP <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">40</span>, <span class="fl">40</span><span class="op">)</span>, AREA <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">3000</span><span class="op">)</span>, PLAND <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span>
<span class="va">savanna</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flsgen_create_class_targets.html">flsgen_create_class_targets</a></span><span class="op">(</span><span class="st">"savanna"</span>, NP <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">30</span>, <span class="fl">30</span><span class="op">)</span>, AREA <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">3000</span><span class="op">)</span>, PLAND <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span>
<span class="va">forest</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flsgen_create_class_targets.html">flsgen_create_class_targets</a></span><span class="op">(</span><span class="st">"forest"</span>, NP <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">20</span><span class="op">)</span>, AREA <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">3000</span><span class="op">)</span>, PLAND <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span>
<span class="va">ls_targets</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flsgen_create_landscape_targets.html">flsgen_create_landscape_targets</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">500</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">shrubland</span>, <span class="va">savanna</span>, <span class="va">forest</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="generating-a-landscape-structure">Generating a landscape structure<a class="anchor" aria-label="anchor" href="#generating-a-landscape-structure"></a>
</h2>
<p>To generate a landscape structure satisfying these targets, we use the <code>flsgen_structure</code> methods:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">structure</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flsgen_structure.html">flsgen_structure</a></span><span class="op">(</span><span class="va">ls_targets</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Landscape structure 1 found in 0.2535198 s</span></code></pre>
<p>This structure is formatted as a JSON string, which can be easily converted to a dataframe using the <a href="https://cran.r-project.org/package=jsonlite" class="external-link">jsonlite</a> package:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">structure_df</span> <span class="op">&lt;-</span> <span class="fu">jsonlite</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/jsonlite/man/fromJSON.html" class="external-link">fromJSON</a></span><span class="op">(</span><span class="va">structure</span><span class="op">)</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/ncell.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">structure_df</span><span class="op">$</span><span class="va">classes</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">structure_df</span><span class="op">$</span><span class="va">classes</span><span class="op">[</span><span class="va">i</span>,<span class="op">]</span><span class="op">$</span><span class="va">name</span>, <span class="st">":"</span>,
            <span class="st">"\n\t number of patches"</span>, <span class="va">structure_df</span><span class="op">$</span><span class="va">classes</span><span class="op">[</span><span class="va">i</span>,<span class="op">]</span><span class="op">$</span><span class="va">NP</span>,
            <span class="st">"\n\t smallest patch size"</span>, <span class="va">structure_df</span><span class="op">$</span><span class="va">classes</span><span class="op">[</span><span class="va">i</span>,<span class="op">]</span><span class="op">$</span><span class="va">SPI</span>,
            <span class="st">"\n\t largest patch size"</span>, <span class="va">structure_df</span><span class="op">$</span><span class="va">classes</span><span class="op">[</span><span class="va">i</span>,<span class="op">]</span><span class="op">$</span><span class="va">LPI</span>, <span class="st">"\n\n"</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<pre><code><span class="co">## shrubland : </span>
<span class="co">##   number of patches 40 </span>
<span class="co">##   smallest patch size 500 </span>
<span class="co">##   largest patch size 3000 </span>
<span class="co">## </span>
<span class="co">## savanna : </span>
<span class="co">##   number of patches 30 </span>
<span class="co">##   smallest patch size 833 </span>
<span class="co">##   largest patch size 834 </span>
<span class="co">## </span>
<span class="co">## forest : </span>
<span class="co">##   number of patches 20 </span>
<span class="co">##   smallest patch size 500 </span>
<span class="co">##   largest patch size 3000</span></code></pre>
<p><strong>Note:</strong> There is a <code>search_strategy</code> parameter in <code>flsgen_structure</code> which indicate to <a href="https://choco-solver.org/" class="external-link">Choco-solver</a> how to construct its search tree. Although this search strategy does not influence whether the targets will be satisfied or not, it can help diversify the generated structure by exploring the search tree in different ways. Available search strategies in Choco are: <code>""DEFAULT", "RANDOM", "DOM_OVER_W_DEG", "DOM_OVER_W_DEG_REF", "ACTIVITY_BASED", "CONFLICT_HISTORY", "MIN_DOM_LB", "MIN_DOM_UB"</code> (please refer to <a href="https://choco-solver.org/docs/solving/strategies/" class="external-link">Choco documentation</a> if you want more details).</p>
</div>
<div class="section level2">
<h2 id="generating-our-first-landscape">Generating our first landscape<a class="anchor" aria-label="anchor" href="#generating-our-first-landscape"></a>
</h2>
<p>At this point, we can quickly generate a landscape raster using the <code>flsgen_generate</code> method:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">landscape</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flsgen_generate.html">flsgen_generate</a></span><span class="op">(</span><span class="va">structure</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">landscape</span><span class="op">)</span></code></pre></div>
<p><img src="UseCase1_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="varying-spatial-configuration">Varying spatial configuration<a class="anchor" aria-label="anchor" href="#varying-spatial-configuration"></a>
</h2>
<p>There are three parameters influencing the spatial configuration of produced landscapes in <code>flsgen_generate</code>:</p>
<ul>
<li>The <code>min_distance</code> parameter, defines the minimum distance between any two patches of the same class.</li>
<li>The <code>terrain</code> parameter, is a continuous raster guiding the generation algorithm.</li>
<li>The <code>terrain_dependency</code> parameter, defines to which extent the generation algorithm is influenced by the terrain.</li>
</ul>
<p>Terrain rasters can either be generated “on-the-fly” by flsgen, which relies on the diamond-square (or midpoint displacement) algorithm or given as input. This last option makes it possible to use continuous neutral landscapes generated with other software packages such as <a href="https://ropensci.github.io/NLMR/" class="external-link"><code>NLMR</code></a>, or even digital elevation models from real landscapes.</p>
<p>Here, we will generate a landscape with various spatial configurations by varying the terrain dependency parameter. We also fix the <code>roughness</code> parameter to 0.2 for on-the-fly diamond-square terrain generation and the <code>min_distance</code> parameter to 4.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">td_seq</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, by<span class="op">=</span><span class="fl">0.1</span><span class="op">)</span>
<span class="va">landscapes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">td_seq</span>, <span class="kw">function</span><span class="op">(</span><span class="va">td</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="../reference/flsgen_generate.html">flsgen_generate</a></span><span class="op">(</span><span class="va">structure</span>, roughness <span class="op">=</span> <span class="fl">0.2</span>, terrain_dependency <span class="op">=</span> <span class="va">td</span>, min_distance <span class="op">=</span> <span class="fl">4</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span></code></pre></div>
<p><img src="figures/use_case_1_landscape_mosaic.png"></p>
<p>Although they look different, all these landscapes have the exact same composition. We can check this using the landscapemetrics package:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatialecology.github.io/landscapemetrics/" class="external-link">landscapemetrics</a></span><span class="op">)</span>

<span class="co"># Number of patches for landscape 2 (td=0.1)</span>
<span class="va">np_landscape_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatialecology.github.io/landscapemetrics/reference/lsm_c_np.html" class="external-link">lsm_c_np</a></span><span class="op">(</span><span class="va">landscapes</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>
<span class="va">np_landscape_2</span><span class="op">[</span><span class="va">np_landscape_2</span><span class="op">$</span><span class="va">class</span> <span class="op">&gt;</span> <span class="op">-</span><span class="fl">1</span>,<span class="op">]</span>

<span class="co"># Number of patches for landscape 10 (td=0.9)</span>
<span class="va">np_landscape_10</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatialecology.github.io/landscapemetrics/reference/lsm_c_np.html" class="external-link">lsm_c_np</a></span><span class="op">(</span><span class="va">landscapes</span><span class="op">[[</span><span class="fl">10</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>
<span class="va">np_landscape_10</span><span class="op">[</span><span class="va">np_landscape_10</span><span class="op">$</span><span class="va">class</span> <span class="op">&gt;</span> <span class="op">-</span><span class="fl">1</span>,<span class="op">]</span>

<span class="co"># Proportion of landscape for landscape 3 (td=0.2)</span>
<span class="va">pland_landscape_3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatialecology.github.io/landscapemetrics/reference/lsm_c_pland.html" class="external-link">lsm_c_pland</a></span><span class="op">(</span><span class="va">landscapes</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>
<span class="va">pland_landscape_3</span><span class="op">[</span><span class="va">pland_landscape_3</span><span class="op">$</span><span class="va">class</span> <span class="op">&gt;</span> <span class="op">-</span><span class="fl">1</span>,<span class="op">]</span>

<span class="co"># Proportion of landscape for landscape 9 (td=0.8)</span>
<span class="va">pland_landscape_9</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatialecology.github.io/landscapemetrics/reference/lsm_c_pland.html" class="external-link">lsm_c_pland</a></span><span class="op">(</span><span class="va">landscapes</span><span class="op">[[</span><span class="fl">9</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>
<span class="va">pland_landscape_9</span><span class="op">[</span><span class="va">pland_landscape_9</span><span class="op">$</span><span class="va">class</span> <span class="op">&gt;</span> <span class="op">-</span><span class="fl">1</span>,<span class="op">]</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="using-external-raster-continuous-raster-gradients">Using external raster continuous raster gradients<a class="anchor" aria-label="anchor" href="#using-external-raster-continuous-raster-gradients"></a>
</h2>
<p>As the <code>terrain</code> parameter influences the spatial configuration of produced landscapes, we can use external rasters, from real data or from external software. Here we use <a href="https://ropensci.github.io/NLMR/" class="external-link"><code>NLMR</code></a> to generate continuous gradients and use them as input for <code>flsgen_generate</code></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ropensci.github.io/NLMR/" class="external-link">NLMR</a></span><span class="op">)</span>
<span class="va">mrf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ropensci.github.io/NLMR/reference/nlm_mosaicfield.html" class="external-link">nlm_mosaicfield</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">500</span><span class="op">)</span>
<span class="va">plg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ropensci.github.io/NLMR/reference/nlm_planargradient.html" class="external-link">nlm_planargradient</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">500</span><span class="op">)</span>
<span class="va">edg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ropensci.github.io/NLMR/reference/nlm_edgegradient.html" class="external-link">nlm_edgegradient</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">500</span><span class="op">)</span>
<span class="va">dg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ropensci.github.io/NLMR/reference/nlm_distancegradient.html" class="external-link">nlm_distancegradient</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">500</span>, origin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">20</span>, <span class="fl">20</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span>
<span class="va">rand</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ropensci.github.io/NLMR/reference/nlm_random.html" class="external-link">nlm_random</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">500</span><span class="op">)</span>
<span class="va">fbm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ropensci.github.io/NLMR/reference/nlm_fbm.html" class="external-link">nlm_fbm</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">500</span><span class="op">)</span>
<span class="va">terrains</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">mrf</span>, <span class="va">plg</span>, <span class="va">edg</span>, <span class="va">dg</span>, <span class="va">rand</span>, <span class="va">fbm</span><span class="op">)</span>
<span class="va">landscapes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">terrains</span>, <span class="kw">function</span><span class="op">(</span><span class="va">t</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="../reference/flsgen_generate.html">flsgen_generate</a></span><span class="op">(</span><span class="va">structure</span>, terrain_file <span class="op">=</span> <span class="va">t</span>, terrain_dependency <span class="op">=</span> <span class="fl">0.8</span>, min_distance <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span></code></pre></div>
<p><img src="figures/use_case_1_nlmr.png"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Dimitri Justeau-Allaire.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
